## shiro集成spring


### ShiroFilter
Shiro提供了与web集成的支持，其通过一个ShiroFilter入口来拦截需要安全控制的URL，然后进行相应的控制
ShiroFilter类似于如Struts/SpringMVC这种框架的前端控制器，是安全控制的入口点，其负责读取(如ini)配置然后判断URL是否需要登录/权限等工作
![](http://md.yingxs.com/shiro06.png)

#### URL配置细节
* [urls] 部分的配置,其格式是"url=拦截器[参数]"，拦截器[参数]
* 如果当前请求的URL匹配urls部分的某个url模式，将会执行其配置的拦截器
* anon (anonymous) 拦截器表示匿名访问
* autnc (authentication) 拦截器表示需要身份认证通过后才能访问

#### URL匹配模式
> Ant路径通配符支持?、*、**注意通配符匹配不包括目录分隔符/
 
* ? 匹配一个字符，如/admin?将匹配/admin1,但不能匹配/admin或/admin/
* \* 匹配零个或多个字符串 如/admin*将匹配/admin,/admin123,但不能匹配/admin/1
* \*\* 匹配路径中的零个或多个路径：如/admin/\*\* 将匹配/admin/a或者/admin/a/b

#### 匹配顺序
> URL权限采取第一次匹配优先的方式，即从头开始使用第一个匹配的URL模式对应的拦截器链

例如
```
/bb/**=filter1
/bb/aa=filter2
/**=filter3
如果请求的是/bb/aa,因为按照声明顺序进行匹配,那么将使用filter1进行拦截
```

```
/login.jsp = anon 
/list.jsp=anon
/** = authc
此时list.jsp可以匿名访问


/login.jsp = anon 
/** = authc
/list.jsp=anon
此时list.jsp不可以匿名访问，第二条配置优先于第三条配置

```