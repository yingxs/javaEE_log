### 1.1.@ExceptionHandler注解处理异常
> @ExceptionHandler该注解使用在异常处理方法上面

* a.写在控制器内
```
@Controller
@RequestMapping("/exception")
public class ExceptionController {

	/**
	 * 异常处理方法
	 * value:该异常方法可以处理的异常类型
	 * @return
	 */
	@ExceptionHandler(value={java.lang.NullPointerException.class})
	public ModelAndView exceptionHandler(Exception ex) {
		ModelAndView mv = new ModelAndView();
		
//		mv.addObject("exception", ex.toString());
		
		StringWriter writer = new StringWriter();
		PrintWriter s = new PrintWriter(writer);
		//将异常栈中的信息暂时写入writer中
		ex.printStackTrace(s);
		
		mv.addObject("exception", writer.toString());
		
		mv.setViewName("error");
		return mv;
		
	}
	
	@RequestMapping("/test1")
	public String test1() {
		System.out.println("ExceptionController的test1()");
		
		//模拟异常
		String name = null;
		name.substring(0);
		
		return "success";
	}
}
```

* b.单独抽取一个类
```
@ControllerAdvice
public class MyExceptionHandler {
	
	/**
	 * 异常处理方法
	 * value:该异常方法可以处理的异常类型
	 * @return
	 */
	@ExceptionHandler(value={java.lang.NullPointerException.class})
	public ModelAndView exceptionHandler(Exception ex) {
		ModelAndView mv = new ModelAndView();
		
//		mv.addObject("exception", ex.toString());
		
		StringWriter writer = new StringWriter();
		PrintWriter s = new PrintWriter(writer);
		//将异常栈中的信息暂时写入writer中
		ex.printStackTrace(s);
		
		mv.addObject("exception", writer.toString());
		
		mv.setViewName("error");
		return mv;
	}
}

```

### SimpleMappingExceptionResolver处理异常
* 页面 index.jsp
```
<h3>1.2.SimpleMappingExceptionResolver处理异常</h3>
<a href="${pageContext.request.contextPath}/exception/test2.action">1.2.SimpleMappingExceptionResolver处理异常</a>
<hr/>
```
* 页面 error.jsp
```
<body>
异常提示页面<br/>
异常信息：${ex}
</body>
```
* Controller
```
@RequestMapping("/test2")
public String test2() {
	System.out.println("ExceptionController的test2()");
	int i = 100/0;
	
	return "success";
}
	
```
* spring-mvc.xml
```
<!-- SimpleMappingExceptionResolver 配置-->
<bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
	<!-- 支持的异常列表 -->
	<property name="exceptionMappings">
		<props>
			<prop key="java.lang.ArithmeticException">error</prop>
		</props>
	</property>
	<!-- 默认就会把异常信息封装到exception名称的属性中 -->
	
	<!-- 修改默认异常属性名称exception为ex -->
	<property name="exceptionAttribute" value="ex"></property>
</bean>
```